# RWA Launchpad - 一键部署需求文档

## 1. 项目概述

### 1.1 项目背景
当前我们拥有一套成熟的DEX系统，包括代币合约(RWA/prRWA/StableRwa)、核心功能合约(Bank/Market/StakePool)、辅助合约(Helper/GLA)等。每当新项目需要部署类似功能时，都需要重复部署和配置整套合约，过程复杂且容易出错。

### 1.2 项目目标
**将现有DEX系统改造为工厂模式，实现"一键部署"功能。**

任何项目方只需：
1. 传入项目ID和配置参数
2. 调用工厂合约的创建函数  
3. 即可获得一套完整独立的DEX系统

## 2. 核心需求

### 2.1 功能需求

#### 2.1.1 工厂合约核心功能
- **项目创建**: 根据项目ID创建独立的合约套件
- **参数配置**: 支持灵活的参数配置，满足不同项目需求
- **地址管理**: 维护项目ID到合约地址的映射关系
- **权限管理**: 确保项目间完全隔离，互不干扰

#### 2.1.2 支持的合约套件
每个项目将获得以下完整合约集合：
- **代币合约**: RWA(主代币)、prRWA(质押奖励代币)、StableRwa(借贷代币)
- **核心功能合约**: Bank(借贷)、MarketV2(交易)、StakePool(质押)
- **辅助合约**: Helper(复合操作)
- **可选合约**: GLA(初始拍卖，可选)

#### 2.1.3 参数配置系统
- **预设模板**: 提供保守型、激进型、平衡型三种预设配置
- **自定义配置**: 支持项目方根据需求自定义所有参数
- **参数验证**: 自动验证参数合理性，防止配置错误
- **配置文档**: 详细的参数说明文档，包含取值范围和影响分析

### 2.2 技术需求

#### 2.2.1 架构设计
```
RWA Launchpad (工厂合约)
├── 代币工厂系统
├── 核心合约工厂 
├── 项目注册管理
├── 参数配置系统
└── 各项目独立合约实例
```

#### 2.2.2 部署流程
1. **参数准备**: 项目方选择或自定义配置参数
2. **参数验证**: 系统自动验证参数有效性
3. **合约部署**: 工厂合约批量部署所有必需合约
4. **初始化配置**: 自动配置合约间的关联关系
5. **权限转移**: 将合约所有权转移给项目方
6. **注册记录**: 在注册表中记录项目信息

#### 2.2.3 数据结构
- **项目ID**: 唯一标识符，用于区分不同项目
- **合约地址映射**: 项目ID -> 合约地址集合
- **参数配置结构**: 标准化的参数传递格式
- **项目状态追踪**: 部署状态、初始化状态等

### 2.3 非功能需求

#### 2.3.1 安全性
- **权限隔离**: 确保项目间完全独立，无法相互影响
- **参数验证**: 防止恶意或错误的参数配置
- **合约安全**: 继承原有合约的安全特性
- **升级安全**: 支持合约逻辑升级而不影响数据

#### 2.3.2 可扩展性
- **新合约添加**: 支持未来添加新的合约类型
- **参数扩展**: 支持新增参数而不影响现有功能
- **网络适配**: 支持部署到不同的区块链网络

#### 2.3.3 易用性
- **简化接口**: 一个函数调用完成整套部署
- **清晰文档**: 详细的使用说明和参数文档
- **错误处理**: 友好的错误提示和回滚机制

## 3. 详细功能规格

### 3.1 RWA Launchpad 主工厂合约

#### 3.1.1 核心函数
```solidity
function createProject(
    string projectName,
    ProjectConfig config
) external returns (uint256 projectId, ProjectContracts contracts);
```

#### 3.1.2 功能描述
- 生成唯一项目ID
- 验证配置参数有效性
- 按顺序部署所有合约
- 自动初始化合约关联
- 返回项目ID和合约地址集合

### 3.2 预设配置系统

#### 3.2.1 保守型配置
- 低费率设置
- 稳定收益模式
- 适合风险厌恶型项目

#### 3.2.2 平衡型配置
- 中等费率设置
- 平衡风险收益
- 适合大多数项目

#### 3.2.3 激进型配置
- 高费率设置
- 高收益高波动
- 适合风险偏好型项目

## 4. 技术实现

### 4.1 合约部署策略
- 使用Clones模式部署代币合约
- 直接部署核心功能合约
- 支持模板合约模式

### 4.2 地址预测
- 使用CREATE2确定性地址
- 预计算合约地址
- 解决循环依赖问题

### 4.3 参数验证
- 范围检查
- 逻辑验证
- 安全限制

## 5. 项目价值

### 5.1 技术价值
- 降低DEX部署门槛
- 标准化DEX架构
- 提高开发效率

### 5.2 商业价值
- 快速项目上线
- 降低开发成本
- 标准化解决方案

## 6. 总结

RWA Launchpad项目旨在为DeFi生态系统提供一个强大的一键部署工具，让任何项目都能快速获得完整的DEX功能。通过工厂化部署，我们能够显著降低DEX项目的开发门槛，推动整个DeFi生态的发展。


