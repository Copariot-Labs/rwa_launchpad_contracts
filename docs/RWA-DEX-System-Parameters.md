# RWA Launchpad - 系统参数文档

## 1. 代币合约参数

### 1.1 主要代币 (RWA)
| 参数名 | 类型 | 默认值 | 取值范围 | 详细描述 | 示例 |
|--------|------|--------|----------|----------|------|
| name | string | "RWA" | 1-50字符 | ERC20代币名称，用于显示和识别。建议使用项目名称+Token | "ProjectX Token", "MyDeFi Token" |
| symbol | string | "RWA" | 1-11字符 | ERC20代币符号，通常3-5个大写字母。用于交易所显示 | "PXT", "MYFI", "DEFI" |
| owner | address | - | 有效地址 | 合约所有者，拥有铸币和销毁权限。通常是多签地址或DAO | 0x1234...abcd |

### 1.2 质押代币 (prRWA)
| 参数名 | 类型 | 默认值 | 取值范围 | 详细描述 | 示例 |
|--------|------|--------|----------|----------|------|
| name | string | "prRWA" | 1-50字符 | 质押奖励代币名称，通常以"pr"开头表示奖励代币 | "prProjectX", "prMyDeFi" |
| symbol | string | "prRWA" | 1-11字符 | 质押奖励代币符号，通常以"pr"开头 | "prPXT", "prMYFI" |
| DEFAULT_ADMIN_ROLE | bytes32 | 0x00 | - | 默认管理员角色，拥有最高权限 | 通常分配给项目方多签 |
| MINT_ROLE | bytes32 | keccak256("MINT_ROLE") | - | 铸币角色，只有StakePool合约拥有此权限 | StakePool合约地址 |

### 1.3 借贷代币 (StableRwa)
| 参数名 | 类型 | 默认值 | 取值范围 | 详细描述 | 示例 |
|--------|------|--------|----------|----------|------|
| name | string | "STABLE_RWA" | 1-50字符 | 借贷代币名称，用于抵押借贷系统 | "ProjectX StableRwa Token" |
| symbol | string | "STABLE_RWA" | 1-11字符 | 借贷代币符号 | "PXOT", "MYFIO" |
| owner | address | - | 有效地址 | 合约所有者，通常是Bank合约 | Bank合约地址 |

## 2. Bank合约参数

### 2.1 初始化参数
| 参数名 | 类型 | 取值范围 | 详细描述 | 影响 | 示例 |
|--------|------|----------|----------|------|------|
| StableRwa | address | 有效合约地址 | StableRwa代币合约地址，用于借贷功能 | 错误地址会导致借贷失败 | 0x1234...abcd |
| market | address | 有效合约地址 | Market合约地址，用于获取RWA底价 | 底价用于计算可借贷额度 | 0x5678...efgh |
| pool | address | 有效合约地址 | StakePool合约地址，用于查询用户质押量 | 质押量决定可借贷额度 | 0x9abc...ijkl |
| helper | address | 有效合约地址 | Helper合约地址，允许代理借贷 | 提供更便捷的复合操作 | 0xdef0...mnop |
| owner | address | 有效地址 | 银行合约的拥有者，可以设置费率和开发者地址 | 拥有管理权限 | 0x1111...2222 |

### 2.2 可配置参数
| 参数名 | 类型 | 取值范围 | 详细描述 | 不同取值的影响 | 推荐值 |
|--------|------|----------|----------|----------------|--------|
| dev | address | 有效地址 | 开发者地址，接收借款手续费 | 影响费用收入分配 | 开发团队多签地址 |
| borrowFee | uint32 | 0-10000 | 借款手续费比例(基于10000) | 0=免费，500=5%，1000=10% | 300-500 (3%-5%) |

**borrowFee影响分析:**
- 0-100 (0%-1%): 极低费率，吸引借贷但收入较少
- 100-500 (1%-5%): 合理费率，平衡用户成本和协议收入
- 500-1000 (5%-10%): 较高费率，可能降低借贷需求
- 1000+ (10%+): 高费率，通常用于风险控制或限制借贷

## 3. MarketV2合约参数

### 3.1 初始化参数
| 参数名 | 类型 | 取值范围 | 详细描述 | 示例 |
|--------|------|----------|----------|------|
| rwa | address | 有效合约地址 | RWA代币合约地址 | 0x1234...abcd |
| prRWA | address | 有效合约地址 | prRWA代币合约地址 | 0x5678...efgh |
| pool | address | 有效合约地址 | StakePool合约地址 | 0x9abc...ijkl |
| dev | address | 有效地址 | 开发者地址，接收交易手续费 | 0xdef0...mnop |

### 3.2 价格调节参数 (核心机制)
| 参数名 | 类型 | 取值范围 | 详细描述 | 不同取值的影响 | 推荐值 |
|--------|------|----------|----------|----------------|--------|
| target | uint32 | 1000-8000 | 目标资金率(基于10000) | 影响价格稳定性和系统资金效率 | 5000 (50%) |
| targetAdjusted | uint32 | target-10000 | 调整后目标资金率 | 触发价格调整的阈值 | 6000 (60%) |
| minTarget | uint32 | 500-target | 目标资金率最小值 | 防止资金率过低 | 3000 (30%) |
| maxTargetAdjusted | uint32 | targetAdjusted-10000 | 调整后目标资金率最大值 | 限制价格调整幅度 | 7000 (70%) |
| raiseStep | uint32 | 100-2000 | 每次上调步长 | 价格上涨速度 | 500 (5%) |
| lowerStep | uint32 | 50-1000 | 每次下调步长 | 价格下跌速度 | 100 (1%) |
| lowerInterval | uint32 | 1 hours-30 days | 下调时间间隔(秒) | 价格调整频率 | 7 days |

**资金率机制详解:**
- 当前资金率 = PSF / (PSF + FSF)
- PSF = 价格支撑资金 = (当前价格 - 底价) × (当前供应量 - 底价供应量) / 2
- FSF = 底价支撑资金 = 底价 × 底价供应量
- 当资金率达到targetAdjusted时，系统会提高底价，降低资金率至target

### 3.3 价格公式参数 (核心算法)
| 参数名 | 类型 | 取值范围 | 详细描述 | 数学含义 | 示例 |
|--------|------|----------|----------|----------|------|
| k | uint256 | 1e15-1e21 | 价格函数斜率的倒数×1e18 | 斜率=1/(k×1e18)，控制价格上涨速度 | 2e18 (斜率=0.5) |
| c | uint256 | f-1e24 | 当前RWA价格(wei) | 当前市场价格 | 1.5e18 ($1.5) |
| f | uint256 | 1e15-1e21 | RWA底价(wei) | 价格下限，提供价格支撑 | 1e18 ($1.0) |
| p | uint256 | 0-1e27 | 底价供应量(wei) | 价格在底价的代币数量 | 10000e18 |
| w | uint256 | 0-1e30 | 系统总价值(wei) | 累计投入的资金总量 | 50000e18 ($50,000) |

**价格公式:**
- 当总供应量 ≤ p: 价格 = f (底价)
- 当总供应量 > p: 价格 = f + (总供应量 - p) / k

### 3.4 费用参数
| 参数名 | 类型 | 取值范围 | 详细描述 | 不同取值的影响 | 推荐值 |
|--------|------|----------|----------|----------------|--------|
| buyFee | uint32 | 0-2000 | 购买RWA手续费(基于10000) | 影响买入成本和协议收入 | 200 (2%) |
| sellFee | uint32 | 0-2000 | 出售RWA手续费(基于10000) | 影响卖出成本和协议收入 | 300 (3%) |

**费用影响分析:**
- 0-50 (0%-0.5%): 极低费率，鼓励频繁交易
- 50-200 (0.5%-2%): 低费率，平衡交易成本和收入
- 200-500 (2%-5%): 中等费率，标准DEX费率
- 500+ (5%+): 高费率，可能抑制交易活跃度

## 4. 预设配置

### 4.1 保守型配置
- **适用场景**: 稳定币项目、风险厌恶型项目
- **特点**: 低费率、低波动、稳定收益
- **参数设置**:
  - 借款费: 1%
  - 交易费: 0.5%
  - 日铸币率: 0.2%

### 4.2 平衡型配置
- **适用场景**: 大多数DeFi项目
- **特点**: 平衡的费率和收益
- **参数设置**:
  - 借款费: 2%
  - 交易费: 1%
  - 日铸币率: 0.5%

### 4.3 激进型配置
- **适用场景**: 高收益项目、风险偏好型
- **特点**: 高费率、高收益、高波动
- **参数设置**:
  - 借款费: 3%
  - 交易费: 1.5%
  - 日铸币率: 1%

## 5. 参数配置建议

### 5.1 新手用户
- 推荐使用预设配置
- 避免修改核心参数
- 重点关注代币名称和符号

### 5.2 高级用户
- 可以自定义所有参数
- 注意参数间的关联性
- 建议先在测试网验证

### 5.3 生产环境
- 充分测试所有参数组合
- 考虑经济模型的影响
- 制定参数调整策略
